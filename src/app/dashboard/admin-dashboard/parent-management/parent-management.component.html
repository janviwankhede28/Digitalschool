<div class="container my-4">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="fw-bold text-warning">
      <i class="bi bi-person-heart me-2"></i> Parents
    </h2>
    <button class="btn btn-warning text-white fw-semibold" (click)="toggleForm()">
      <i class="bi" [ngClass]="showForm ? 'bi-x-circle' : 'bi-plus-circle'"></i>
      {{ showForm ? 'Close Form' : 'Add Parent' }}
    </button>
  </div>

  <!-- Success Message -->
  <div *ngIf="message" class="alert alert-success alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="btn-close" (click)="message = ''"></button>
  </div>

  <!-- Add/Edit Parent Form -->
  <div *ngIf="showForm" class="card mb-4 shadow-sm rounded-4 border-0">
    <div class="card-body">
      <form #parentForm="ngForm" (ngSubmit)="saveParent()" novalidate>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label fw-semibold">Parent Name</label>
            <input type="text" [(ngModel)]="parentData.name" name="name" class="form-control rounded-3" required>
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold">Child Name</label>
            <input type="text" [(ngModel)]="parentData.childName" name="childName" class="form-control rounded-3" required>
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold">Contact</label>
            <input 
              type="text"
              [(ngModel)]="parentData.contact"
              name="contact"
              class="form-control rounded-3"
              required
              pattern="[0-9]{10}"
              #contact="ngModel"
            >
            <div *ngIf="contact.invalid && contact.touched" class="text-danger small">
              Enter a valid 10-digit mobile number.
            </div>
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold">Email</label>
            <input 
              type="email"
              [(ngModel)]="parentData.email"
              name="email"
              class="form-control rounded-3"
              required
              email
              #email="ngModel"
            >
            <div *ngIf="email.invalid && email.touched" class="text-danger small">
              Please enter a valid email.
            </div>
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold">Address</label>
            <input type="text" [(ngModel)]="parentData.address" name="address" class="form-control rounded-3" required>
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold">Relation</label>
            <input type="text" [(ngModel)]="parentData.relation" name="relation" class="form-control rounded-3" required>
          </div>
        </div>

        <div class="text-end mt-4">
          <button 
            type="submit" 
            class="btn btn-success px-4 rounded-3"
            [disabled]="parentForm.invalid">
            {{ isEdit ? 'Update Parent' : 'Add Parent' }}
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Table -->
  <div class="card shadow-sm rounded-4">
    <div class="card-body p-0">
      <table class="table table-bordered table-hover m-0">
        <thead class="bg-warning bg-opacity-25 text-center">
          <tr>
            <th>Parent Name</th>
            <th>Child Name</th>
            <th>Contact</th>
            <th>Email</th>
            <th>Address</th>
            <th>Relation</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody class="text-center">
          <tr *ngFor="let parent of parents">
            <td><strong>{{ parent.name }}</strong></td>
            <td>{{ parent.childName }}</td>
            <td>{{ parent.contact }}</td>
            <td>{{ parent.email }}</td>
            <td>{{ parent.address }}</td>
            <td>{{ parent.relation }}</td>
            <td>
              <button class="btn btn-outline-primary btn-sm me-2" (click)="editParent(parent)">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="btn btn-outline-danger btn-sm" (click)="deleteParent(parent.id)">
                <i class="bi bi-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
